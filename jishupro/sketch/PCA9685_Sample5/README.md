## エンコーダ付き連続回転サーボを使う ##

注意：ここで出てくる変数名はプログラムとは一致しません

アブソリュートエンコーダから、モータ角度の情報が、0から360度に対して0〜Lの範囲の整数lで与えられる

モータの角度をx[deg] (0から360度の範囲), xを多回転に拡張したものをtheta[deg]とすると、次の式が成り立つ
```
(1) x = l * 360 / L

(2) theta = x + 360 * n
```

ここで、nはモータの回転が何周目かを表す整数である

### 初期化 ###

setup()でエンコーダを一度読み、その角度をx_0[deg]として保存しておく

### thetaの更新 ###

エンコーダによって式(1)で求めた角度をxとする。

このとき、thetaおよびnは次のようにして更新できる

```
n_next = argmin_n(|x+360*(n-1)-theta|, |x+360*n-theta|, |x+360*(n+1)-theta|)

theta_next = x + 360 * n_next
```

### 速度の指定 ###

速度wから、[-100, 100]の範囲の値pを計算する（p=-100はpwmのパルス幅1000、p=100がpwmのパルス幅2000に相当し、p=0はpwmのパルス幅1500）

秋月のPCA9685ライブラリで、pを使ってi2cの指令を送る

### 位置制御(簡単ver) ###

目標角度goal[deg]に向かって、角速度wで回転したい

- abs(goal-theta)がある閾値A未満になったら、角速度を0にする。

- abs(goal-theta)がある閾値B(>A)より大きい場合は、角速度wで回す。

- abs(goal-theta)がAからBの範囲にあるときは、制御を行う。
例えば、角速度=k*(theta-goal)とか（P制御）
